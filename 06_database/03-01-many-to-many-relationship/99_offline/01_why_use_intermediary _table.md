# 왜 중개(중간) 모델을 만들어야 하는가.

1. 의사는 다수의 환자를 진료하여야 한다.
2. 환자는 다수의 의사에게 진료를 받을 수 있어야 한다.

- 의사 데이터

  | 이름 | 분야 |
  |---|---|
  | 김내과 | 내과 |
  | 이비인 | 이비인후과 |
  | 박치과 | 치과 |

- 환자 데이터
  
  | 이름 | 나이 |
  |---|---|
  | 최배탈 | 13 |
  | 정상 | 72 |
  | 유충치 | 36 |

## 중개 모델을 사용하지 않는다면

- 의사 테이블 구조 변경
  
  | PK | PRIMARY KEY |
  |---|---|
  | 이름 | TEXT |
  | 분야 | TEXT | 
  | 환자_id | FOREIGN KEY |

- 환자 테이블 구조 변경
  
  | PK | PRIMARY KEY |
  |---|---|
  | 이름 | TEXT |
  | 나이 | INT | 
  | 의사_id | FOREIGN KEY |

---

- 만약, `최배탈 환자`가 `김내과 의사`, `이비인 의사` 와 진료 예정이고, 
- `유충치 환자`가 `김내과 의사`, `박치과 의사` 와 진료 예정이라면
  1. 의사 데이터는? 중복되는 데이터가 생성되어야 함.
     - `최배탈 환자` 를 참조하고 있는 `김내과 의사`
     - `유충치 환자` 를 참조하고 있는 `김내과 의사` 
  2. 환자 데이터는? 마찬가지로 중복되는 데이터가 발생함.
     - `이비인 의사` 를 참조하고 있는 `최배탈 환자`
     - `김내과 의사` 를 참조하고 있는 `최배탈 환자`

---

> 편의상 각 id를 이름으로 표기하였음

- 의사 데이터

  | 이름 | 분야 | 환자_id |
  |---|---|---|
  | 김내과 | 내과 | 최배탈 |
  | 김내과 | 내과 | 유충치 |
  | 이비인 | 이비인후과 | 최배탈 |
  | 박치과 | 치과 | 유충치 |

- 환자 데이터
  
  | 이름 | 나이 | 의사_id | 
  |---|---|---|
  | 최배탈 | 13 | 김내과 |
  | 최배탈 | 13 | 이비인 |
  | 정상 | 72 | Null |
  | 유충치 | 36 | 김내과 |
  | 유충치 | 36 | 박치과 |

-> 각 테이블의 데이터들이 무엇을 위한 것인지 알기 어려움

## 중개 모델을 사용한다면

- 예약 정보 테이블 구조

  | PK | PRIMARY KEY |
  |---|---|
  | 의사_id | FOREIGN KEY |
  | 환자_id | FOREIGN KEY | 
  | 증상 | Text |

- 예약 정보 데이터

  | 의사 | 환자 | 증상 |
  |---|---|---|
  | 김내과 | 최배탈 | 배탈 |
  | 김내과 | 유충치 | 감기 |
  | 이비인 | 최배탈 | 중이염 |
  | 박치과 | 유충치 | 충치 |

1. 의사와 환자 테이블을 수정하지 않아도 각각의 관계를 형성 가능
2. 의사 테이블은 의사의 정보만 기록
3. 환자 테이블은 환자의 정보만 기록
4. 추가 필드를 정의할 수 있음.
